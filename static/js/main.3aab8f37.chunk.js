(this["webpackJsonpfile-upload-mern"]=this["webpackJsonpfile-upload-mern"]||[]).push([[0],{71:function(e,t,c){},72:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c(34),a=c.n(n),s=c(16),i=c(7),l=c(12),o=c.n(l),j=c(14),d=c(17),b=c(13),p=c(11),u=c(75),h=c(74),O=c(36),x=c(76),f=c(39),m=c(15),v=c.n(m),g="https://filer-server-backend.herokuapp.com",w=c(1),y=function(e){var t=Object(r.useState)(null),c=Object(p.a)(t,2),n=c[0],a=c[1],s=Object(r.useState)(""),i=Object(p.a)(s,2),l=i[0],m=i[1],y=Object(r.useState)({title:"",description:""}),N=Object(p.a)(y,2),k=N[0],D=N[1],S=Object(r.useState)(""),C=Object(p.a)(S,2),P=C[0],E=C[1],F=Object(r.useState)(!1),I=Object(p.a)(F,2),R=I[0],T=I[1],M=Object(r.useRef)(),_=function(e){return D(Object(b.a)(Object(b.a)({},k),{},Object(d.a)({},e.target.name,e.target.value)))},A=function(e){"over"===e?M.current.style.border="2px solid #000":"leave"===e&&(M.current.style.border="2px dashed #e9ebeb")},G=function(){var t=Object(j.a)(o.a.mark((function t(c){var r,a,s;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),t.prev=1,r=k.title,a=k.description,""===r.trim()||""===a.trim()){t.next=18;break}if(!n){t.next=15;break}return(s=new FormData).append("file",n),s.append("title",r),s.append("description",a),E(""),t.next=12,v.a.post("".concat(g,"/upload"),s,{headers:{"Content-Type":"multipart/form-data"}});case 12:e.history.push("/list"),t.next=16;break;case 15:E("Please select a file to add.");case 16:t.next=19;break;case 18:E("Please enter all the field values");case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),t.t0.response&&E(t.t0.response.data);case 24:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}();return Object(w.jsx)(r.Fragment,{children:Object(w.jsxs)(u.a,{className:"search-form",onSubmit:G,children:[P&&Object(w.jsx)("p",{className:"errorMsg",children:P}),Object(w.jsx)(h.a,{children:Object(w.jsx)(O.a,{children:Object(w.jsx)(u.a.Group,{controlId:"title",children:Object(w.jsx)(u.a.Control,{type:"text",name:"title",value:k.title||"",placeholder:"Enter title",onChange:_})})})}),Object(w.jsx)(h.a,{children:Object(w.jsx)(O.a,{children:Object(w.jsx)(u.a.Group,{controlId:"description",children:Object(w.jsx)(u.a.Control,{type:"text",name:"description",value:k.description||"",placeholder:"Enter description",onChange:_})})})}),Object(w.jsxs)("div",{className:"upload-section",children:[Object(w.jsx)(f.a,{onDrop:function(e){var t=Object(p.a)(e,1)[0];a(t),M.current.style.border="2px dashed #e9ebeb";var c=new FileReader;c.onload=function(){m(c.result)},c.readAsDataURL(t),T(t.name.match(/\.(jpeg|jpg|png)$/))},onDragEnter:function(){return A("over")},onDragLeave:function(){return A("leave")},children:function(e){var t=e.getRootProps,c=e.getInputProps;return Object(w.jsxs)("div",Object(b.a)(Object(b.a)({},t({className:"drop-zone"})),{},{ref:M,children:[Object(w.jsx)("input",Object(b.a)({},c())),Object(w.jsx)("p",{children:"Drag and drop a file OR click here to select a file"}),n&&Object(w.jsxs)("div",{children:[Object(w.jsx)("strong",{children:"Selected file:"}),n.name]})]}))}}),l?R?Object(w.jsx)("div",{className:"image-preview",children:Object(w.jsx)("img",{src:l,alt:"Preview",className:"preview-image"})}):Object(w.jsx)("div",{className:"preview-message",children:Object(w.jsx)("p",{children:"No preview available for this file."})}):Object(w.jsx)("div",{className:"preview-message",children:Object(w.jsx)("p",{children:"Image preview will be shown here after selection."})})]}),Object(w.jsx)(x.a,{variant:"primary",type:"submit",children:"submit"})]})})},N=function(){return Object(w.jsxs)("div",{className:"header",children:[Object(w.jsx)("h1",{children:"My Cloud"}),Object(w.jsxs)("nav",{children:[Object(w.jsx)(s.b,{activeClassName:"active",to:"/",exact:!0,children:"Home"}),Object(w.jsx)(s.b,{activeClassName:"active",to:"/list",children:"my files"})]})]})},k=c(38),D=c.n(k),S=function(){var e=Object(r.useState)([]),t=Object(p.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(""),s=Object(p.a)(a,2),i=s[0],l=s[1];Object(r.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("".concat(g,"/getAllFiles"));case 3:t=e.sent,c=t.data,l(""),n(c),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.response&&l(e.t0.response.data);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var d=function(){var e=Object(j.a)(o.a.mark((function e(t,c,r){var n,a,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.get("".concat(g,"/download/").concat(t),{responseType:"blob"});case 3:return n=e.sent,a=c.split("/"),s=a[a.length-1],l(""),e.abrupt("return",D()(n.data,s,r));case 10:e.prev=10,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&l("Error while downloading file. Please Try again later");case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,c,r){return e.apply(this,arguments)}}();return Object(w.jsxs)("div",{className:"files-container",children:[i&&Object(w.jsx)("p",{className:"errorMsg",children:i}),Object(w.jsxs)("table",{className:"files-table",children:[Object(w.jsx)("thead",{children:Object(w.jsxs)("tr",{children:[Object(w.jsx)("th",{children:"Title"}),Object(w.jsx)("th",{children:"Description"}),Object(w.jsx)("th",{children:"Download File"})]})}),Object(w.jsx)("tbody",{children:c.length>0?c.map((function(e){var t=e._id,c=e.title,r=e.description,n=e.file_path,a=e.file_mimetype;return Object(w.jsxs)("tr",{children:[Object(w.jsx)("td",{className:"file-title",children:c}),Object(w.jsx)("td",{className:"file-description",children:r}),Object(w.jsx)("td",{children:Object(w.jsx)("a",{href:"#/",onClick:function(){return d(t,n,a)},children:"Download"})})]},t)})):Object(w.jsx)("tr",{children:Object(w.jsx)("td",{colSpan:3,style:{fontWeight:"300"},children:"No files found. Please add some."})})})]})]})},C=function(){return Object(w.jsx)(s.a,{children:Object(w.jsxs)("div",{className:"container",children:[Object(w.jsx)(N,{}),Object(w.jsx)("div",{className:"main-content",children:Object(w.jsxs)(i.c,{children:[Object(w.jsx)(i.a,{component:y,path:"/",exact:!0}),Object(w.jsx)(i.a,{component:S,path:"/list"})]})})]})})};c(70),c(71);a.a.render(Object(w.jsx)(C,{}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.3aab8f37.chunk.js.map